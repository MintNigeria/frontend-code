<div class="border-1.5 rounded-t-md">
    <h3 class="py-4  border-b-1.5 px-6 font-sans font-bold text-base text-black">Profile</h3>
    <div class="p-6 " [formGroup]="profileForm">
        <div class="border-b">
            <div class="lg:w-10/12 ">
                <div class="lg:flex gap-6">
                    <div class="w-full md:w-1/4">
                        <p class="font-inter font-medium text-sm text-lightGray">Profile Picture</p>
                        <p class="font-inter font-normal text-sm text-lightGray">This will be displayed on your profile.</p>
                    </div>
                    <div class="lg:w-full md:w-2/3 mt-3 lg:mt-0">
                        <div class="flex items-start gap-5 mb-9">
                            <img tabindex="0" class="cursor-pointer " routerLink="/main/profile" *ngIf="profileImage !== null" src="data:image/png;base64,{{profileImage}}" class="!w-12 !h-12 rounded-full object-cover" alt="Avatar">
                            <img tabindex="0" class="cursor-pointer" routerLink="/main/profile" *ngIf="profileImage === null" src="assets/images/main/Avatar.svg" class="" alt="Avatar">
                            <div class="relative  text-[#6E7191] bg-white  py-3 px-4 w-full rounded-lg border-solid border cursor-pointer  flex justify-center items-center">
                                <label for="file1">
                                  <img src="assets/images/auth/upload.svg" alt="uploadIcon"
                                    class="mx-auto flex justify-center items-center" /> &nbsp; &nbsp;
                                  <p *ngIf="selectedFile" class="b-2 text-sm text-gray-500 dark:text-gray-400"> {{selectedFile}} </p>
                                  <p *ngIf="!selectedFile" class="b-2 text-sm text-gray-500 dark:text-gray-400 text-center"> <span
                                      class="font-medium font-inter text-primaryBlue">Click to Upload</span> (max. 5mb) </p>
                                </label>
                                <input (change)="handleFileUpload($event)" [accept]="allowedFiled" class="hidden  file:absolute file:w-full file:h-full" type="file"
                                  id="file1" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-wrap gap-6 mb-9 border-b">
                    <div class="w-full md:w-1/4">
                        <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                            Personal Details
                        </label>
                    </div>
                    <div class="w-full md:w-2/3">
                        <div class="">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                First Name <span class="text-danger">*</span>
                            </label>
                            <app-input 
                            [formGrp]="profileForm" 
                            formCtrlName="firstName" 
                            [type]="'text'" 
                            [class]="'px-4 h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                            Issuer="Enter first name"
                            [name]="'First name'"></app-input>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Middle Name
                            </label>
                            <app-input 
                            [formGrp]="profileForm" 
                            formCtrlName="middleName" 
                            [type]="'text'" 
                            [class]="'px-4 h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                            Issuer="Enter middle name"
                            [name]="'Middle name'"></app-input>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Last Name <span class="text-danger">*</span>
                            </label>
                            <app-input 
                            [formGrp]="profileForm" 
                            formCtrlName="lastName" 
                            [type]="'text'" 
                            [class]="'px-4 h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                            Issuer="Enter last name"
                            [name]="'Last name'"></app-input>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Email <span class="text-danger">*</span>
                            </label>
                            <app-input 
                            [formGrp]="profileForm" 
                            formCtrlName="email" 
                            [type]="'email'" 
                            [class]="'px-4 h-[52px] w-full bg-grayWhite border rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                            Issuer="Email Address" 
                            [name]="'Email'"
                            [readonly]="true"></app-input>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Phone Number <span class="text-danger">*</span>
                            </label>
                            
                            <div class="w-full ">
                                <ngx-intl-tel-input
                                [cssClass]="'phone-number-field h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-nunito placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'"
                                [enableAutoCountrySelect]="true"
                                [enablePlaceholder]="true"
                                [searchCountryFlag]="true"
                                [selectFirstCountry]="false"
                                [searchCountryField]="[
                                  SearchCountryField.Iso2,
                                  SearchCountryField.Name
                                ]"
                                [phoneValidation]="true"
                                [selectedCountryISO]="CountryISO.Nigeria"
                                [maxLength]="15"
                                [phoneValidation]="true"
                                [separateDialCode]="separateDialCode"
                                [numberFormat]="PhoneNumberFormat.National"
                                name="phone"
                                aria-autocomplete="phoneno"
                                formControlName="phone"
                                type="tel"
                                            >
                                            </ngx-intl-tel-input>
                              </div>
                            <small class="text-red-500" *ngIf="profileForm.controls['phone'].touched && profileForm.controls['phone'].invalid">
                              Invalid phone number 
                            </small>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Gender <span class="text-danger">*</span>
                            </label>
                            <app-input 
                            [formGrp]="profileForm" 
                            formCtrlName="gender" 
                            [type]="'text'" 
                            [class]="'px-4 h-[52px] w-full bg-grayWhite border rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                            Issuer="Gender" 
                            [name]="'gender'"
                            [readonly]="true"></app-input>
                        </div>
                        <div class="mt-3 mb-6">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Date of Birth <span class="text-danger">*</span>
                            </label>
                            <app-input 
                            [formGrp]="profileForm" 
                            formCtrlName="dateOfBirth" 
                            [type]="'date'" 
                            [max]="currentYear"
                            [class]="'px-4 h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                            Issuer="Choose Date of Birth"
                            [name]="'Date of birth'"></app-input>
                        </div>
                    </div>
                </div>
                <div class="flex flex-wrap gap-6 mb-9 border-b">
                    <div class="w-full md:w-1/4">
                        <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                            Contact Information
                        </label>
                    </div>
                    <div class="w-full md:w-2/3 ">
                        <div class="">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Country <span class="text-danger">*</span>
                            </label>
                            <div class="w-full " >
                                <ng-select class="custom-ng-dropdown" 
                                formControlName="country" 
                                [selectOnTab]="true" 
                                placeholder="Select Country"
                                (change)="onCountryChange($event)"
                                >
                            <ng-option  *ngFor="let country of countries" [value]="country | json">{{country.name}}</ng-option>
                            </ng-select>
                            <small class="text-red-500" *ngIf="profileForm.controls['country'].touched && profileForm.controls['country'].invalid">
                                Country is required 
                              </small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                State of Location <span class="text-danger">*</span>
                            </label>
                            <div class="w-full " >
                                <ng-select class="custom-ng-dropdown" 
                                formControlName="state" 
                                [selectOnTab]="true" 
                                placeholder="Select State"
                                (change)="onStateChange($event)"
                                >
                            <ng-option *ngFor="let state of states" [value]="state | json">{{state.name}}</ng-option>
                            </ng-select>
                            <small class="text-red-500" *ngIf="profileForm.controls['state'].touched && profileForm.controls['state'].invalid">
                                State is required
                              </small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                State of Origin <span class="text-danger">*</span>
                            </label>
                            <div class="w-full " >
                                <ng-select class="custom-ng-dropdown" 
                                formControlName="stateOfOrigin" 
                                [selectOnTab]="true" 
                                placeholder="Select State of Origin"
                                >
                            <ng-option *ngFor="let state of states" [value]="state.name">{{state.name}}</ng-option>
                            </ng-select>
                            <small class="text-red-500" *ngIf="profileForm.controls['state'].touched && profileForm.controls['state'].invalid">
                                State is required
                              </small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                City <span class="text-danger">*</span>
                            </label>
                            <div class="w-full ">
                                <ng-select class="custom-ng-dropdown" 
                                formControlName="city" 
                                [selectOnTab]="true" 
                                placeholder="Select City"
                                (change)="onCityChange($event)"
                                >
                            <ng-option *ngFor="let lga of cities" [value]="lga | json">{{lga.name}}</ng-option>
                            </ng-select>
                            <small class="text-red-500" *ngIf="profileForm.controls['city'].touched && profileForm.controls['city'].invalid">
                                City is required
                              </small>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Address <span class="text-danger">*</span>
                            </label>
                            <div class="w-full ">
                                <app-input 
                                [formGrp]="profileForm" 
                                formCtrlName="address" 
                                [type]="'text'" 
                                [class]="'px-4 h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                                Issuer="Enter your address"
                                [name]="'address'"></app-input>
                            </div>
                        </div>
                        <div class="mt-3 mb-6">
                            <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                                Zip Code
                            </label>
                            <div class="w-full ">
                                <app-input 
                                [formGrp]="profileForm" 
                                formCtrlName="zipCode" 
                                [type]="'text'" 
                                [class]="'px-4 h-[52px] w-full bg-white border focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none'" 
                                Issuer="Enter your Zip Code" 
                                [name]="'address'"></app-input>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="flex flex-wrap gap-6 mb-9 ">
                    <div class="w-full md:w-1/4">
                        <label class=" font-inter font-medium lg:text-sm text-xs text-failedNormal" for="inline-full-name">
                            Social Profiles
                        </label>
                    </div>
                    <div class="w-full md:w-2/3 ">
                        <div class="form-control mb-3">
                            
                            <label class="input-group">
                              <span>twitter</span>
                              <input type="text" placeholder="info@site.com" formControlName="twitter" class="input input-bordered px-4 h-[52px] w-fit bg-white  border-r focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none" />
                            </label>
                          </div>
                        <div class="form-control mb-3">
                            
                            <label class="input-group">
                              <span>facebook</span>
                              <input type="text" placeholder="info@site.com" formControlName="facebook" class="input input-bordered px-4 h-[52px] w-fit bg-white  border-r focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none" />
                            </label>
                          </div>
                        <div class="form-control mb-6">
                            
                            <label class="input-group">
                              <span>linkedIn</span>
                              <input type="text" placeholder="info@site.com" formControlName="linkedIn" class="input input-bordered px-4 h-[52px] w-fit bg-white  border-r focus:bg-white rounded-lg border-[#D0D5DD] placeholder:font-inter placeholder:leading-6 placeholder:text-base placeholder:text-lightGray placeholder:font-normal focus:border-[D0D5DD] outline-none" />
                            </label>
                          </div>
                      
                       
                    </div>
                </div>
            </div>
        </div>

        
        <div class="flex justify-end items-center gap-4 mt-4">
            <app-button
            
            [overRideButtonClass]="true"
            customClass="px-3 py-2 rounded-lg font-inter font-medium text-sm   bg-white border text-failedNormal"
            >Cancel</app-button>
            <app-button
            (buttonClick)="openChangesConfirmed()"
            [overRideButtonClass]="true"
            customClass="px-3 py-2 rounded-lg font-inter font-medium text-sm text-white  bg-primaryBlue"
            >Save</app-button>
        </div>
    </div>
</div>

<app-modal [id]="confirmChanges">
    <div class="lg:rounded-xl bg-white hide-scrollbar  lg:p-2 p-6 modal-box">
        <div class="grid grid-rows-2 justify-items-center mt-8">
            <img src="assets/images/icons/warning.svg" alt="warning_icon">
            <h3 class="font-inter font-medium text-xl text-discountBlue mt-8">Save Changes?</h3>
            <p class="text-center lg:w-96 font-inter font-normal text-sm text-failedNormal mt-8 px-10">
                Are you sure you want to update your profile information?
            </p>
        </div>
        <div class="flex justify-center mt-8 mb-8 gap-3">
            <app-button
            [overRideButtonClass]="true"
            [customClass]="'bg-white rounded-lg border border-buttonBlue  hover:bg-buttonBlue hover:text-white text-buttonBlue text-base font-medium font-inter py-2 px-4'"
            (buttonClick)="cancelConfirmChanges()">
             No ,Cancel
            </app-button>
            <app-button
            [overRideButtonClass]="true"
            [customClass]="'bg-buttonBlue rounded-lg  hover:bg-buttonBlue text-white text-base font-medium font-inter py-2 px-4'"
            (buttonClick)=" saveUpdates()"
            >
                Yes, Update
            </app-button>
        </div>
    </div>
</app-modal>

<app-modal [id]="changesConfirmed">
    <div class="toast toast-center">
        <div class="alert alert-success flex justify-between items-center">
            <div class="font-avenir font-meduim lg:text-lg text-base">
                <span>Your changes have been saved successfully!</span>
            </div>
            <label [for]="changesConfirmed">
                <img src="assets/images/icons/x.svg" alt="close_toast">
            </label>
        </div>
    </div>
</app-modal>