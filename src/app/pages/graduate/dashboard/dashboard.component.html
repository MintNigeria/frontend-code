<div class="px-5 md:px-8 pt-9 pb-5">
    <div class="bg-[#F5F9FF] p-7 rounded-lg flex flex-wrap gap-[14px] items-center" *ngIf="updatedData?.length > 0">
        <img src="assets/images/graduates/exclamation-icon.svg" class="w-12" alt="">
        
        <div class="flex-1">
            <h4 class="text-[#344054] text-[22px] font-inter font-semibold">Institution not found </h4>
            <p class="font-medium font-inter text-[#344054]">Your institution is not registered with NSPMC yet, please notify them so they can register </p>
        </div>

        <app-button (buttonClick)="notifyInstitution()" [buttonText]="'Notify My Institution'" [overRideButtonClass]="true" [customClass]="'bg-[#4086EF] text-white py-3 px-8 rounded-lg'"></app-button>
    </div>
</div>


  
  <div class="px-5 md:px-8 flex justify-between" *ngIf="user$ | async as user">
    <h3 class="text-[#101828] font-medium font-poppins text-[30px] leading-10">Welcome onboard, {{ user.firstName }}</h3>
    <div class="flex gap-2">
      <app-button routerLink="/graduate/my-verifications/new/institution-details" buttonText="New Verification" customClass="text-sm text-[#0D47A1] font-inter rounded-lg font-medium px-4 py-2.5 bg-[#F5F9FF]" [overRideButtonClass]="true"></app-button>
      <app-button routerLink="/graduate/my-applications/new/academic-details" buttonText="New Application" customClass="text-sm text-white font-inter rounded-lg font-medium px-4 py-2.5 bg-primaryBlue" [overRideButtonClass]="true"></app-button>
  
    </div>
</div>

<div class="px-5 md:px-8 mt-6 grid [grid-template-columns:repeat(auto-fit,minmax(250px,1fr))] gap-6">
    <div class="bg-[#4086EF] text-white rounded-[7px]">
        <div class="px-6 py-4">
            <img src="assets/images/graduates/wallet-balance-icon.svg" class="w-12" alt="">

            <p class="text-sm font-medium font-inter mt-6">Wallet Balance</p>
            <h3 class="mt-2 text-white font-semibold text-4xl leading-[44px] font-poppins">â‚¦{{cardData?.walletBalance || 0 | commaDelimiter}}</h3>
        </div>
        <div class="text-right cursor-pointer border-t-[#71A5F4] border-t border-solid px-6 py-4 font-medium text-sm font-inter" routerLink="/graduate/transactions/fund-wallet">
            Fund Wallet
        </div>
    </div>
    
    <div class="rounded-[7px] shadow_">
        <div class="px-6 py-4">
            <img src="assets/images/graduates/application-requests-icon.svg" class="w-12" alt="">
    
            <p class="text-sm font-medium text-[#667085] font-inter mt-6">All Application requests</p>
            <h3 class="mt-2 text-[#101828] font-semibold text-4xl leading-[44px] font-poppins">{{cardData?.noOfApplicationRequests || 0}}</h3>
        </div>
        <div class="text-right text-[#0D47A1] border-t-[#EAECF0] border-t border-solid px-6 py-4 font-medium text-sm font-inter">
            <button routerLink="/graduate/my-applications">View Report</button>
        </div>
    </div>
    
    <div class="rounded-[7px] shadow_">
        <div class="px-6 py-4">
            <img src="assets/images/graduates/verification-requests-icon.svg" class="w-12" alt="">
    
            <p class="text-sm font-medium text-[#667085] font-inter mt-6">All verification requests</p>
            <h3 class="mt-2 text-[#101828] font-semibold text-4xl leading-[44px] font-poppins">{{cardData?.noOfVerificationRequests || 0}}</h3>
        </div>
        <div class="text-right text-[#0D47A1] border-t-[#EAECF0] border-t border-solid px-6 py-4 font-medium text-sm font-inter">
            <button routerLink="/graduate/my-verifications">View Report</button>
        </div>
    </div>
</div>

<div class="px-5 md:px-8 mt-6">
    <div class="p-6 border border-solid border-[#EAECF0] rounded-lg">
        <h4 class="text-lg text-[#101828] font-medium">Application  Analytics</h4>
        <div class="mt-8">
          <div class="inline-flex rounded-md shadow-sm mb-6 bg-white" role="group">
            <button (click)="changeRange(0)" type="button"
              class="font-inter px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-l-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
              All Time
            </button>
        
            <button (click)="changeRange(4)" type="button"
              class="font-inter px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
              12 month
            </button>
            <button (click)="changeRange(3)" type="button"
              class="font-inter px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
              30 days
            </button>
            <button (click)="changeRange(2)" type="button"
              class="font-inter px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
              7 days
            </button>
            <button (click)="changeRange(1)" type="button"
              class="font-inter px-4 py-2 text-sm font-medium text-gray-900 bg-white border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
              24 hours
            </button>
            <button (click)="changeRange(5)" type="button"
              class="font-inter px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-r-md hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 ">
              Custom date
            </button>
          </div>
          <div class="flex justify-end items-center mb-4 gap-3">
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full bg-primaryBlue">&nbsp;</span>
              <p class="font-normal font-nunito text-lightGray text-sm">Application</p>
            </div>
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full bg-[#FAC515]">&nbsp;</span>
              <p class="font-normal font-nunito text-lightGray text-sm">
                Verification
              </p>
            </div>
            <!-- <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full bg-[#FDB022]">&nbsp;</span>
              <p class="font-normal font-nunito text-lightGray text-sm">
                Others
              </p>
            </div> -->
          </div>
          <canvas id="request" #chart> {{chart}} </canvas>
        </div>
    </div>
</div>

<div class="px-5 md:px-8 mt-6">
    <div class="p-6 border border-solid border-[#EAECF0] rounded-lg">
        <div class="flex flex-wrap gap-6 justify-between">
            <div>
                <h4 class="text-lg text-[#101828] font-medium">Recent Applications</h4>
                <p class="text-[#667085]">Here are your recent applications</p>
            </div>
           
            <app-button routerLink="/graduate/my-applications" buttonText="View All" customClass="text-sm text-[#0D47A1] font-inter rounded-lg font-medium px-4 py-2.5 bg-[#F5F9FF]" [overRideButtonClass]="true"></app-button>
        </div>

        <div class="overflow-x-auto mt-8 hide-scrollbar">
          <table class="table w-full">
            <thead>
              <tr >
                <th
                  class="flex gap-1 text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Request ID
                  <span
                    ><img
                      src="assets/images/icons/arrow_down.svg"
                      alt=""
                      class="mt-0.5"
                  /></span>
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Document Type
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Delivery Option
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Destination
                </th>

                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Status
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Action
                </th>
              </tr>
            </thead>

            <tbody class="">
              <tr *ngFor="let data of recentApplications" class=" ">
                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base cursor-pointer font-inter font-medium text-[#101828]"
                    >
                      {{ data.referrencNumber }}
                    </p>
                    <p
                      class="text-xs font-normal font-inter my-0 text-[#667085]"
                    >
                      {{ data?.requestDate | date }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base cursor-pointer font-inter font-normal text-[#667085]"
                    >
                      {{ data.documentType }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base font-inter cursor-pointer font-medium text-[#0D47A1]"
                    >
                      {{ data.deliveryOptions || 'N/A' }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base cursor-pointer font-inter font-normal text-[#667085]"
                    >
                      {{ data.destination || 'N/A' }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div class="rounded text-center">
                    <div
                      class="rounded-full text-center w-fit px-2 py-[2px] flex items-center"
                      
                    >
                    <div
                      class="mr-3 w-2 h-2 rounded-full"
                      [ngClass]="
                      data.status === 1
                      ? 'bg-[#A0A3BD]'
                      : data.status === 2
                      ? 'bg-[#FDCC62]'
                      : data.status === 3
                      ? 'bg-[#E61B00]'
                      : data.status === 4
                      ? 'bg-[#008400]'
                      : data.status === 5
                      ? 'bg-[#EE6D00]'
                      : data.status === 6
                      ? 'bg-[#E61B00]'
                      : 'bg-[#008400]'
                      "
                    ></div>
                    <p
                      class="my-0 text-sm cursor-pointer font-inter font-medium w-auto"
                      [ngClass]="
                        data.status === 1
                          ? 'text-[#A0A3BD]'
                          : data.status === 2
                          ? 'text-[#FDCC62]'
                          : data.status === 3
                          ? 'text-[#E61B00]'
                          : data.status === 4
                          ? 'text-[#008400]'
                          : data.status === 5
                          ? 'text-[#EE6D00]'
                          : data.status === 6
                          ? 'text-[#E61B00]'
                          : 'text-[#008400]'
                      "
                    >
                      {{ data.status === 1 ? 'Pending' : data.status === 2 ? 'Processing' : data.status === 3 ? 'Dispatched' : data.status === 4 ? 'Paused' : data.status === 5 ? 'Delivered' : data.status === 6 ? 'Declined' : 'Delivered' }}
                    </p>
                      
                    </div>
                  </div>
                </td>
                <td class="bg-white">
                  <div
                    class="flex gap-2 items-center"
                    [routerLink]="'/graduate/my-applications/view-application/' + data.id"
                  >
                    <p
                      class="my-0 text-sm font-inter cursor-pointer font-medium text-[#0D47A1]"
                    >
                      View
                    </p>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
</div>

<div class="px-5 md:px-8 mt-6 pb-20">
    <div class="p-6 border border-solid border-[#EAECF0] rounded-lg">
        <div class="flex flex-wrap gap-6 justify-between">
            <div>
                <h4 class="text-lg text-[#101828] font-medium">Recent Transactions</h4>
                <p class="text-[#667085]">Here are your recent transactions</p>
            </div>

            <app-button routerLink="/graduate/transactions" buttonText="View All" customClass="text-sm text-[#0D47A1] font-inter rounded-lg font-medium px-4 py-2.5 bg-[#F5F9FF]" [overRideButtonClass]="true"></app-button>
        </div>

        <div class="overflow-x-auto mt-8 hide-scrollbar">
          <table class="table w-full">
            <thead>
              <tr>
                <th
                  class="flex gap-1 text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Date
                  <span
                    ><img
                      src="assets/images/icons/arrow_down.svg"
                      alt=""
                      class="mt-0.5"
                  /></span>
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Amount
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Payment Method
                </th>
                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Transaction Description
                </th>

                <th
                  class="text-xs text-[#667085] font-medium font-inter bg-[#F9FAFB]"
                >
                  Status
                </th>
              </tr>
            </thead>

            <tbody class="">
              <tr *ngFor="let data of recentTransactions" class=" ">
                <td class="bg-white">
                  <div>
                    <p
                      class="text-xs font-normal font-inter my-0 text-[#667085]"
                    >
                      {{ data?.transactionDate | date }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base cursor-pointer font-inter font-normal text-[#667085]"
                    >
                      {{ data.amountPaid | commaDelimiter }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base font-inter cursor-pointer font-medium text-[#667085]"
                    >
                      {{ data.paymentType  }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p
                      class="my-0 text-base cursor-pointer font-inter font-normal text-[#667085]"
                    >
                      {{ data.description }}
                    </p>
                  </div>
                </td>

                <td class="bg-white">
                  <div class="rounded text-center">
                    <div
                      class="rounded-full text-center w-auto"
                     
                    >
                      <div class="flex items-center gap-2 w-auto">
                        <div
                          class="mr-3 w-2 h-2 rounded-full"
                          [ngClass]="
                          data.paymentStatus === 1
                          ? 'bg-[#008400]'
                          : data.paymentStatus === 2
                          ? 'bg-[#E61B00]'
                          :  'bg-[#EE6D00]'
                          "
                        ></div>
                        <p [ngClass]="
                        data.paymentStatus === 1
                        ? 'text-[#008400]'
                        : data.paymentStatus === 2
                        ? 'text-[#E61B00]'
                        :  'text-[#EE6D00]'
                        " class="my-0 text-sm cursor-pointer font-inter font-medium w-auto" >
                          {{ data.paymentStatus === 1 ? 'Approved' : data.paymentStatus === 2 ? 'Declined' : 'Pending'  }}
                        </p>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
    </div>
</div>