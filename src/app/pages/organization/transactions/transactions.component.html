<div class="bg-white p-6">
  <!--Header-->
  <div class="flex  items-center md:gap-4 gap-2 ">
    <div>
      <img [routerLink]="'/organization/transaction'" src="assets/images/icons/home.svg" alt="home-icon">
    </div>
    <div>
      <img src="assets/images/icons/forward_arrow.svg" alt="forward-arrow">
    </div>

    <div>
      <p class="text-primaryBlue font-inter md:text-base text-sm font-medium cursor-pointer">
        Transaction
      </p>

    </div>

  </div>
  <div class="px-5">
    <div class="items-center my-2 lg:flex lg:justify-between">
      <h4 class="font-medium font-poppins lg:text-4xl text-xl  text-darkGray my-3">
        Transaction History
      </h4>
      <div class="rounded-md border">
        <div class="bg-successLight rounded-md">
          <div class="p-6 flex justify-between items-center gap-3">
            <div>
              <div class="flex mb-3 ">
                <div class="flex p-1 rounded mr-2 bg-[#12B76A]">
                  <img src="assets/images/main/Number.svg" alt="">
                </div>
                <p class="border-b border-dashed font-inter font-semibold lg:text-base text-xs text-failedNormal">
                  Account Balance</p>
              </div>
              <p class="text-successNormal font-bold text-3xl font-poppins">â‚¦{{balance || 0 | commaDelimiter}}</p>
            </div>
            <div>
              <app-button [buttonText]="'Buy Plan'" [overRideButtonClass]="true"
                [customClass]="'border rounded border-grayWhite bg-white text-failedNormal font-inter font-medium text-sm h-8'"
                [routerLink]="'/organization/transactions/payment-plan'">
              </app-button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!---->

  <!--Filters-->

  <div class="w-full  rounded-xl shadow-sm p-6 border-none  bg-tabBlue">
    <div>
      <div class="flex md:flex-row md:justify-between md:items-center  flex-col w-full">
        <div class="lg:flex lg:justify-between gap-4 grid grid-cols-2 ">
          <div class="lg:justify-between gap-4">
            <p class="text-failedNormal font-inter text-sm font-medium cursor-pointer mb-2">
              Date
            </p>
            <div class="dropdown dropdown-bottom">
              <label tabindex="0"
                class="flex justify-between items-center bg-white rounded-[10px] border border-inputBg lg:w-40 h-10 w-32  py-4 px-3 cursor-pointer">
                <p class="my-0 text-[lightGray] font-inter font-medium text-sm">{{ selectedOption }}</p>
                <img src="assets/images/icons/downward_arrow.svg" alt="downward_arrow">
              </label>
              <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-white text-black rounded-box w-52">
                <li><a (click)="changeRange(0, 'All Time') ">All Time</a></li>
                <li><a (click)="changeRange(3, '30 Days')">30 Days</a></li>
                <li><a (click)="changeRange(2, '7 days' )">7 Days</a></li>
                <li><a (click)="changeRange(1, '24 Hours')">24 Hours</a></li>
                <li>
                  <a (click)="changeRange(5, 'Custom Period')">Custom Period</a>
                </li>
              </ul>
            </div>
          </div>

          <div class="lg:justify-between gap-4">
            <p class="text-failedNormal font-inter text-sm font-medium cursor-pointer mb-2">
              Transaction Type
            </p>
            <div class="dropdown dropdown-bottom">
              <label tabindex="0"
                class="flex justify-between items-center bg-white rounded-[10px] border border-inputBg lg:w-40 h-10 w-32  py-4 px-3 cursor-pointer">
                <p class="my-0 text-[lightGray] font-inter font-medium text-sm">{{ selectedType }}</p>
                <img src="assets/images/icons/downward_arrow.svg" alt="downward_arrow">
              </label>
              <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-white rounded-box w-56">
                <li><a (click)="selectedType='All'">All</a></li>
                <li><a (click)="changeType('subscription payment plan')">Subscription payment plan</a></li>
                <li><a (click)="changeType('payment for verification')">Payment for verification</a></li>
                <li><a (click)="changeType('talent search pool')">talent search pool</a></li>
              </ul>
            </div>
          </div>

          <div class="lg:justify-between gap-4">
            <p class="text-failedNormal font-inter text-sm font-medium cursor-pointer mb-2">
              Status
            </p>
            <div class="dropdown dropdown-bottom">
              <label tabindex="0"
                class="flex justify-between items-center bg-white rounded-[10px] border border-inputBg lg:w-40 h-10 w-32  py-4 px-3 cursor-pointer">
                <p class="my-0 text-[lightGray] font-inter font-medium text-sm">{{ status }}</p>
                <img src="assets/images/icons/downward_arrow.svg" alt="downward_arrow">
              </label>
              <ul
              tabindex="0"
              class="dropdown-content menu p-2 shadow bg-white text-black rounded-box w-72"
              >

              <li><a (click)="changeStatus(0, 'Pending')">Pending</a>
              </li>
              <li>
                <a (click)="changeStatus(1, 'Approved')">Approved</a>
              </li>
              <li>
                <a (click)="changeStatus(2, 'Decline')">Declined</a>
              </li>
              </ul>
            </div>
          </div>

          <div class="flex items-center mt-6">
            <button type="button"
              class="bg-[#4086EF] text-white font-medium font-inter text-xs w-[80px] h-[40px] rounded-xl"
              (click)="addFilter()">Add Filter</button>
            <button type="button"
              class="bg-none  text-[#4086EF] font-medium font-inter text-xs w-[80px] h-[40px] rounded"
              (click)="clearFilter()">Clear Filter</button>
          </div>

        </div>

      </div>
    </div>
  </div>

  <!---->

  <!--Table-->

  <div class="mt-3 py-3 rounded-xl bg-white border border-solid border-[#EFF0F6]">
    <!--Search and Export-->
    <div class="mt-3 bg-white">
      <div class="md:block hidden px-7">
        <form>
            <div class="flex md:flex-row md:justify-between md:items-center flex-col w-full">
                <div class="flex lg:justify-between gap-4">
                    <app-search 
                    [placeholder]="'Search by Transaction Id'"
                    (iconSearch)="search($event)"
        [formGrp]="searchForm" formCtrlName="searchPhrase"  
        ></app-search>
                </div>

                <!-- <div class="flex md:items-center gap-4 ">
                    <div>
                        <div class="lg:justify-between gap-4">
                            <div class="dropdown dropdown-end">
                                <label tabindex="0" class="flex justify-between bg-[#F5F9FF] rounded-[10px] items-center  border border-none min-w-[101px] py-[8px] px-4 text-sm cursor-pointer">
                                <p class="my-0 text-[#0D47A1] font-inter font-medium text-sm">Export</p>
                                <img src="assets/images/icons/downward_arrow_blue.svg" alt="" class="">
                                </label>
                                <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-white text-black rounded-box w-52">
                                    <li (click)="download('CSV')"><a>Export as CSV</a></li>
                                    <li (click)="download('Excel')"><a >Export as Excel</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div> -->


            </div>
        </form>

      </div>
      <!---->

      <!--Table Content-->

      <div>

        <div class="overflow-x-auto mt-8 hide-scrollbar">
          <table class="table w-full">
            <thead>
              <tr>
                <th class="flex gap-1 text-xs text-lightGray font-medium font-inter bg-tableHeader ">Transaction ID
                </th>
                <th class="text-xs text-lightGray font-medium font-inter bg-tableHeader  ">Transaction Date</th>
                <th class="flex gap-1 text-xs text-lightGray font-medium font-inter bg-tableHeader ">Transaction Type
                </th>
                <th class="text-xs text-lightGray font-medium font-inter bg-tableHeader ">Amount</th>
                <th class="text-xs text-lightGray font-medium font-inter bg-tableHeader ">Status</th>
              </tr>
            </thead>

            <tbody class="">
              <tr
                *ngFor="let data of history | paginate: { itemsPerPage: filter.pageSize, currentPage: filter.pageIndex, totalItems: total } "
                class="bg-white" class=" ">


                <td class="bg-white">
                  <div class="items-center">
                    <div>
                      <div>
                        <p class="my-0 text-base cursor-pointer font-inter font-medium text-darkGray ">
                          {{data.transactionId || 'N/A'}}</p>
                      </div>
                    </div>

                  </div>
                </td>
                <td class="bg-white">
                  <div class="items-center">
                    <div>
                      <div>
                        <p class="my-0 text-base cursor-pointer font-inter font-normal text-lightGray ">
                          {{data.transactionDate || 'N/A' | date: 'mediumDate'}}</p>
                      </div>
                    </div>

                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p class="my-0 text-base cursor-pointer font-inter font-normal text-lightGray ">{{data.description || 'N/A'}}
                    </p>

                  </div>
                </td>

                <td class="bg-white">
                  <div>
                    <p class="my-0 text-base cursor-pointer font-inter font-normal text-lightGray ">â‚¦{{data.amountPaid | commaDelimiter}}</p>

                  </div>
                </td>
                <td class="bg-white">
                    <div class="rounded text-center">
                        <div
                          class="rounded-full text-center w-fit px-2 py-[2px] flex items-center"
                          
                        >
                        <div
                          class="mr-3 w-2 h-2 rounded-full"
                          [ngClass]="
                          data.paymentStatus === 2
                              ? 'bg-[#E61B00]'
                              : data.paymentStatus === 1
                              ? 'bg-[#008400]'
                              : 'bg-[#EE6D00]'
                              "
                        ></div>
                        <p
                          class="my-0 text-sm cursor-pointer font-inter font-medium w-auto"
                          [ngClass]="
                            data.paymentStatus === 2
                              ? 'text-[#E61B00]'
                              : data.paymentStatus === 1
                              ? 'text-[#008400]'
                              : 'text-[#EE6D00]'
                              
                          "
                        >
                          {{ data.paymentStatus === 1? 'Approved' : data.paymentStatus === 2 ? 'Declined' : 'Pending' }}
                        </p>
                          
                        </div>
                      </div>
                 

                </td>
              </tr>
            </tbody>
          </table>


        </div>
      </div>

      <!---->

      <!--Pagination-->
      <div class="flex items-center justify-end mt-10">
        <!-- <p class="text-xs md:text-sm text-[#4E4B66] opacity-50">
                Showing 1 to 7 of {{ transactionList.length }} entries
            </p> -->
        <div class="flex item gap-3">
          <pagination-controls (pageChange)="getPage(filter.pageIndex = $event)" previousLabel="Prev" nextLabel="Next">
          </pagination-controls>

        </div>
      </div>

    </div>

  </div>



</div>
